<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko-KR" xml:lang="ko-KR"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.16">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>10&nbsp; ellmer 패키지 – AI가 밝혀낸 유통 고수요 데이터의 진실</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./coding_claude.html" rel="next">
<link href="./coding_ide.html" rel="prev">
<link href="./assets/android-chrome-192x192.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-0d563caddaf30aca1956f94a84606a4d.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-0fe41346b718ff62733f5cc60e32bfbd.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-0d563caddaf30aca1956f94a84606a4d.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-988a9d6da8984c6fcd567f9a2889acc4.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-988a9d6da8984c6fcd567f9a2889acc4.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-988a9d6da8984c6fcd567f9a2889acc4.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "일치 없음",
    "search-matching-documents-text": "일치된 문서",
    "search-copy-link-title": "검색 링크 복사",
    "search-hide-matches-text": "추가 검색 결과 숨기기",
    "search-more-match-text": "추가 검색결과",
    "search-more-matches-text": "추가 검색결과",
    "search-clear-button-title": "제거",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "취소",
    "search-submit-button-title": "검색",
    "search-label": "검색"
  }
}</script>

<script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-229551680-1', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script>
<script src="site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="사이드바 전환" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./coding_prompt.html"><strong>2부 AI 코딩</strong></a></li><li class="breadcrumb-item"><a href="./coding_ellmer.html"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">ellmer 패키지</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="사이드바 전환" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./assets/android-chrome-192x192.png" alt="" class="sidebar-logo light-content py-0 d-lg-inline d-none">
      <img src="./assets/android-chrome-192x192.png" alt="" class="sidebar-logo dark-content py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">AI가 밝혀낸 유통 고수요 데이터의 진실</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="리더 모드 전환">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">서문</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text"><strong>1부 기본지식</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basic_gpt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">AI 범용기술</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">AI 기초</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basic_engineering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">AI 공학</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basic_ide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">데이터 과학 IDE</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basic_api.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">API와 웹서비스</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text"><strong>2부 AI 코딩</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./coding_prompt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">프롬프트 엔지니어링</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./coding_context.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">컨텍스트 엔지니어링</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./coding_openai.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">OpenAI API</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./coding_ide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">포지트론 IDE</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./coding_ellmer.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">ellmer 패키지</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./coding_claude.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">클로드 코드</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text"><strong>3부 사례 분석</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./proj_penguin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">펭귄 생태 분석</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./proj_penguin_py.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">펭귄 생태 분석(파이썬)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./proj_market.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">고수요 데이터</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./proj_survey.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">선거 여론조사</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./proj_car.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">중고차 시세</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./end.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">맺음말</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">참고문헌</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">목차</h2>
   
  <ul>
  <li><a href="#설치" id="toc-설치" class="nav-link active" data-scroll-target="#설치"><span class="header-section-number">10.1</span> 설치</a></li>
  <li><a href="#설계-원칙" id="toc-설계-원칙" class="nav-link" data-scroll-target="#설계-원칙"><span class="header-section-number">10.2</span> 설계 원칙</a></li>
  <li><a href="#핵심-기능" id="toc-핵심-기능" class="nav-link" data-scroll-target="#핵심-기능"><span class="header-section-number">10.3</span> 핵심 기능</a>
  <ul class="collapse">
  <li><a href="#tool-calling" id="toc-tool-calling" class="nav-link" data-scroll-target="#tool-calling"><span class="header-section-number">10.3.1</span> Tool Calling</a></li>
  <li><a href="#정형-데이터-추출" id="toc-정형-데이터-추출" class="nav-link" data-scroll-target="#정형-데이터-추출"><span class="header-section-number">10.3.2</span> 정형 데이터 추출</a></li>
  <li><a href="#streaming과-병렬-처리" id="toc-streaming과-병렬-처리" class="nav-link" data-scroll-target="#streaming과-병렬-처리"><span class="header-section-number">10.3.3</span> Streaming과 병렬 처리</a></li>
  </ul></li>
  <li><a href="#실무-활용-시나리오" id="toc-실무-활용-시나리오" class="nav-link" data-scroll-target="#실무-활용-시나리오"><span class="header-section-number">10.4</span> 실무 활용 시나리오</a>
  <ul class="collapse">
  <li><a href="#자동화된-데이터-품질-검증" id="toc-자동화된-데이터-품질-검증" class="nav-link" data-scroll-target="#자동화된-데이터-품질-검증"><span class="header-section-number">10.4.1</span> 자동화된 데이터 품질 검증</a></li>
  <li><a href="#코드-리뷰-자동화" id="toc-코드-리뷰-자동화" class="nav-link" data-scroll-target="#코드-리뷰-자동화"><span class="header-section-number">10.4.2</span> 코드 리뷰 자동화</a></li>
  <li><a href="#논문-메타데이터-추출" id="toc-논문-메타데이터-추출" class="nav-link" data-scroll-target="#논문-메타데이터-추출"><span class="header-section-number">10.4.3</span> 논문 메타데이터 추출</a></li>
  </ul></li>
  <li><a href="#posit-생태계-통합" id="toc-posit-생태계-통합" class="nav-link" data-scroll-target="#posit-생태계-통합"><span class="header-section-number">10.5</span> Posit 생태계 통합</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./coding_prompt.html"><strong>2부 AI 코딩</strong></a></li><li class="breadcrumb-item"><a href="./coding_ellmer.html"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">ellmer 패키지</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-coding-ellmer" class="quarto-section-identifier"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">ellmer 패키지</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Posit은 2024년 R 생태계에서 LLM 활용을 대중화하기 위한 전략적 결정을 내렸다<span class="citation" data-cites="ellmer2024docs">(<a href="references.html#ref-ellmer2024docs" role="doc-biblioref">Wickham 기타, 2024</a>)</span>. 데이터 과학자들이 Python이나 JavaScript를 배우지 않고도 LLM의 강력한 기능을 활용할 수 있도록, R 네이티브 인터페이스를 제공하는 것이 핵심 목표였다.</p>
<p>ellmer는 단순한 API 래퍼가 아니다. Posit은 데이터 과학 워크플로우에 LLM을 자연스럽게 통합하는 것을 목표로 했다. 15개 이상의 LLM 제공업체를 단일 인터페이스로 통합하면서도, R의 철학인 “사용자 친화성”과 “재현 가능성”을 유지했다. 특히 Tool Calling 기능을 통해 LLM이 R 함수를 직접 실행할 수 있게 함으로써, 전통적인 통계 분석과 AI를 결합하는 새로운 패러다임을 제시했다.</p>
<p>Posit의 전략은 명확하다. R 사용자가 익숙한 환경에서 최신 AI 기술을 활용할 수 있도록 하는 것으로 요약된다. ellmer는 이러한 비전의 핵심이며, 데이터 과학과 AI의 경계를 허물고 있다.</p>
<section id="설치" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="설치"><span class="header-section-number">10.1</span> 설치</h2>
<p>ellmer 패키지는 CRAN에서 쉽게 설치할 수 있다. 설치 후 첫 번째 LLM과의 대화는 놀라울 정도로 간단하다. API 키를 환경 변수로 설정하고, 채팅 객체를 생성한 뒤, <code>$chat()</code> 메서드를 호출하면 된다. 이 간단한 인터페이스 뒤에는 복잡한 HTTP 요청, 토큰 관리, 에러 처리 등이 모두 추상화되어 있다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 설치와 첫 대화</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ellmer"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ellmer)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.setenv</span>(<span class="at">OPENAI_API_KEY =</span> <span class="st">"your-api-key"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>chat <span class="ot">&lt;-</span> <span class="fu">chat_openai</span>(<span class="at">model =</span> <span class="st">"gpt-4o-mini"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>chat<span class="sc">$</span><span class="fu">chat</span>(<span class="st">"Hello, World! What is R?"</span>)</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="설계-원칙" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="설계-원칙"><span class="header-section-number">10.2</span> 설계 원칙</h2>
<p>ellmer의 가장 혁신적인 설계는 제공업체 독립적(Provider-Agnostic) 아키텍처다. Posit은 데이터 과학자들이 특정 LLM 제공업체에 종속되는 위험을 인식하고, 벤더 중립적 설계를 핵심 원칙으로 삼았다. 단순한 기술적 결정이 아니라 전략적 선택이다. 기업 환경에서는 비용 최적화를 위해 작업별로 다른 모델을 사용해야 하고, 서비스 중단이나 가격 정책 변경에 대비해야 한다. 연구자들은 다양한 모델의 성능을 비교 실험해야 한다. ellmer는 이 모든 요구를 <code>Provider</code> 클래스와 <code>Chat</code> 객체의 추상화를 통해 해결한다.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 제공업체만 변경하면 동일한 인터페이스로 작동</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chat_openai</span>()    <span class="co"># OpenAI GPT - 범용적이고 안정적</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">chat_anthropic</span>() <span class="co"># Claude - R 코드 생성에 탁월</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">chat_google</span>()    <span class="co"># Gemini - 무료 티어 제공</span></span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
<p>또한, ellmer가 R6 객체지향 프로그래밍을 채택한 것은 LLM과의 상호작용 본질을 이해한 결과다. LLM과 대화는 단발성 질문-답변이 아니라 연속적인 사고 과정이다. 데이터 분석 과정에서 “이 데이터를 요약해줘”라고 물은 후 “이상치는 어떻게 처리할까?”라고 이어 물을 때, LLM은 앞선 맥락을 기억해야 한다. R6 클래스는 이러한 상태를 효율적으로 관리하면서도, 대화를 분기하거나 저장하고 복원하는 등의 고급 기능을 가능하게 한다. 함수형 프로그래밍에 익숙한 R 사용자에게는 낯설 수 있지만, 이는 LLM을 진정한 분석 파트너로 만들기 위한 필수적인 선택이었다.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Chat 객체는 대화 기록을 유지</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>chat <span class="ot">&lt;-</span> <span class="fu">chat_anthropic</span>()</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>chat<span class="sc">$</span><span class="fu">chat</span>(<span class="st">"R이 뭐야?"</span>)  <span class="co"># 첫 번째 질문</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>chat<span class="sc">$</span><span class="fu">chat</span>(<span class="st">"더 자세히 설명해줘"</span>)  <span class="co"># 맥락을 기억하고 답변</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 대화 분기 - 독립적인 실험 가능</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>chat_experiment <span class="ot">&lt;-</span> chat<span class="sc">$</span><span class="fu">clone</span>()</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>chat_experiment<span class="sc">$</span><span class="fu">chat</span>(<span class="st">"다른 주제로 전환해보자"</span>)</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
<p>세 번째 핵심 설계 원칙은 <strong>타입 안전성(Type Safety)과 구조화된 데이터 추출</strong>이다. LLM은 본질적으로 텍스트를 생성하지만, 데이터 분석에는 정형화된 데이터 구조가 필요하다. ellmer는 타입 시스템을 통해 LLM 응답을 R의 네이티브 데이터 구조(벡터, 데이터프레임)로 자동 변환한다. 이는 JSON 파싱이나 정규표현식 없이도 안전하게 구조화된 데이터를 추출할 수 있게 한다.</p>
<p>네 번째는 <strong>비용 인식 설계(Cost-Aware Design)</strong>다. LLM API는 토큰 단위로 과금되므로 비용 관리가 중요하다. ellmer는 각 대화의 토큰 사용량과 예상 비용을 실시간으로 추적하고 표시한다. 대규모 배치 처리나 병렬 처리 시 특히 중요한 기능이다.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div id="fig-ellmer-architecture" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ellmer-architecture-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-ellmer-architecture">graph TB
    subgraph "ellmer 아키텍처"
        A["🎯 Provider-Agnostic&lt;br/&gt;벤더 독립적 설계"] 
        B["💾 R6 상태 관리&lt;br/&gt;대화 연속성 보장"]
        C["🔒 타입 안전성&lt;br/&gt;구조화된 데이터 추출"]
        D["💰 비용 인식&lt;br/&gt;토큰 사용량 추적"]
    end
    
    A --&gt; E["통합 인터페이스&lt;br/&gt;chat_openai()&lt;br/&gt;chat_anthropic()&lt;br/&gt;chat_google()"]
    B --&gt; F["대화 상태 유지&lt;br/&gt;$chat()&lt;br/&gt;$clone()&lt;br/&gt;$get_turns()"]
    C --&gt; G["자동 타입 변환&lt;br/&gt;type_object()&lt;br/&gt;type_array()&lt;br/&gt;→ data.frame"]
    D --&gt; H["실시간 비용 추적&lt;br/&gt;token_usage()&lt;br/&gt;cost_estimate()"]
    
    E --&gt; I["데이터 과학&lt;br/&gt;워크플로우"]
    F --&gt; I
    G --&gt; I
    H --&gt; I
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#e8f5e9
    style D fill:#fff3e0
    style I fill:#ffebee
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ellmer-architecture-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;10.1: ellmer 패키지의 4대 핵심 설계 원칙
</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">노트</span>R에서 클로드 사용하는 이유
</div>
</div>
<div class="callout-body-container callout-body">
<p>R 코드 생성과 데이터 분석 작업에서는 클로드(Claude)가 특히 뛰어난 성능을 보인다.</p>
<ol type="1">
<li><strong>R 문법 이해도</strong>: tidyverse 패키지와 최신 R 패러다임에 대한 깊은 이해</li>
<li><strong>코드 품질</strong>: 더 깔끔하고 관용적인(idiomatic, R답게 작성된) R 코드 생성</li>
<li><strong>디버깅 능력</strong>: R 특유의 에러 메시지 해석과 해결책 제시에 탁월</li>
<li><strong>긴 컨텍스트</strong>: 복잡한 분석 프로젝트에서 전체 맥락 유지</li>
</ol>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Claude를 활용한 전문 데이터 분석 어시스턴트</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.setenv</span>(<span class="at">ANTHROPIC_API_KEY =</span> <span class="st">"your-api-key"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>chat <span class="ot">&lt;-</span> <span class="fu">chat_anthropic</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">model =</span> <span class="st">"claude-3-5-sonnet-20241022"</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">system_prompt =</span> <span class="st">"You are an expert R data analyst specializing in tidyverse."</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># R 특화 질문</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>chat<span class="sc">$</span><span class="fu">chat</span>(<span class="st">"dplyr로 그룹별 상위 3개 행을 선택하는 방법을 알려줘"</span>)</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
</section>
<section id="핵심-기능" class="level2" data-number="10.3">
<h2 data-number="10.3" class="anchored" data-anchor-id="핵심-기능"><span class="header-section-number">10.3</span> 핵심 기능</h2>
<p>ellmer는 현대 데이터 과학의 복잡한 요구사항을 충족하는 네 가지 핵심 기능을 제공한다. <strong>Tool Calling</strong>은 LLM이 실시간으로 R 함수를 실행하여 동적 데이터 분석을 가능하게 하며, <strong>정형 데이터 추출</strong>은 비정형 텍스트에서 구조화된 정보를 자동으로 파싱하여 즉시 사용 가능한 데이터프레임으로 변환한다. <strong>Streaming 처리</strong>는 긴 응답을 실시간으로 받아 사용자 경험을 향상시키고, <strong>병렬 처리</strong>는 수백 개의 문서나 대화를 동시에 처리하여 대규모 분석 작업의 효율성을 극대화한다. 이러한 기능들은 서로 유기적으로 연동되어, 단순한 코드 생성 도구를 넘어 데이터 과학자의 사고 과정을 확장하는 지능적인 분석 파트너로서 작동한다. 특히 실시간 비용 모니터링과 토큰 사용량 추적 기능을 통해 안심하고 사용할 수 있는 해법을 제공한다.</p>
<section id="tool-calling" class="level3" data-number="10.3.1">
<h3 data-number="10.3.1" class="anchored" data-anchor-id="tool-calling"><span class="header-section-number">10.3.1</span> Tool Calling</h3>
<p>Tool Calling은 ellmer의 가장 혁신적인 기능이다. LLM이 텍스트 생성을 넘어 실제 R 함수를 실행할 수 있게 함으로써, 진정한 의미의 대화형 데이터 분석이 가능해졌다. 예를 들어, “현재 작업 디렉토리에 있는 CSV 파일들의 크기를 알려줘”라고 요청하면, LLM이 직접 <code>list.files()</code>와 <code>file.info()</code> 함수를 호출하여 실시간 정보를 제공한다. 이는 사전 학습된 지식이 아닌 실제 시스템 상태를 반영한 답변이다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 간단한 도구 등록 예제</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>chat<span class="sc">$</span><span class="fu">register_tool</span>(<span class="fu">tool</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>() <span class="fu">Sys.Date</span>(),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Returns current date"</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">"get_date"</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>chat<span class="sc">$</span><span class="fu">chat</span>(<span class="st">"오늘이 무슨 요일이야?"</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> Replacing existing get_date tool.</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> 현재 날짜를 확인해보겠습니다.</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> ◯ [tool call] <span class="fu">get_date</span>()</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> ● <span class="co">#&gt; "2025-08-03"</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="dv">2025</span>년 <span class="dv">8</span>월 <span class="dv">3</span>일은 일요일입니다.</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="정형-데이터-추출" class="level3" data-number="10.3.2">
<h3 data-number="10.3.2" class="anchored" data-anchor-id="정형-데이터-추출"><span class="header-section-number">10.3.2</span> 정형 데이터 추출</h3>
<p>비정형 텍스트에서 구조화된 데이터를 추출하는 것은 데이터 과학의 일상적인 과제다. ellmer는 타입 시스템을 통해 이 과정을 자동화한다. 회의록에서 액션 아이템을 추출하거나, 이메일에서 주문 정보를 파싱하거나, 논문에서 메타데이터를 수집하는 작업이 모두 몇 줄의 코드로 가능하다. LLM이 텍스트를 이해하고, ellmer가 그 결과를 R 데이터프레임으로 변환한다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 타입 정의와 추출</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>type_person <span class="ot">&lt;-</span> <span class="fu">type_object</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Extract person information"</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">type_string</span>(<span class="st">"Person's name"</span>),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">type_number</span>(<span class="st">"Person's age"</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="st">"저는 김철수입니다. 35살이에요."</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> chat<span class="sc">$</span><span class="fu">chat_structured</span>(text, <span class="at">type =</span> type_person)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 결과 확인</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>result</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $name</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "김철수"</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $age</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 35</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 데이터프레임으로 변환</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>result_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(result)</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>result_df</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     name age</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 김철수  35</span></span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="streaming과-병렬-처리" class="level3" data-number="10.3.3">
<h3 data-number="10.3.3" class="anchored" data-anchor-id="streaming과-병렬-처리"><span class="header-section-number">10.3.3</span> Streaming과 병렬 처리</h3>
<p>대규모 텍스트 처리나 여러 문서 분석은 시간과 비용이 많이 든다. ellmer는 두 가지 방법으로 이를 해결한다. 첫째, 스트리밍을 통해 LLM 응답을 실시간으로 받아볼 수 있어 사용자 경험이 개선된다. 둘째, 병렬 처리를 통해 수백 개의 문서를 동시에 분석할 수 있다. 비용 인식 설계 덕분에 각 작업의 토큰 사용량과 예상 비용도 실시간으로 확인 가능하다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 여러 파일을 병렬로 요약</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"data"</span>, <span class="fu">c</span>(<span class="st">"report1.txt"</span>, <span class="st">"report2.txt"</span>, <span class="st">"report3.txt"</span>))</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>texts <span class="ot">&lt;-</span> <span class="fu">map</span>(files, readLines)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>prompts <span class="ot">&lt;-</span> <span class="fu">map</span>(texts, <span class="sc">~</span> <span class="fu">paste</span>(.x, <span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>))</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>summaries <span class="ot">&lt;-</span> <span class="fu">parallel_chat</span>(</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  chat,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(prompts, <span class="sc">~</span> <span class="fu">paste</span>(<span class="st">"이 문서를 한 문장으로 요약해줘:</span><span class="sc">\n\n</span><span class="st">"</span>, .x))</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 토큰 사용량과 비용 확인</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>ellmer<span class="sc">::</span><span class="fu">token_usage</span>()</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   provider                      model input output cached_input price</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Anthropic claude-3-5-sonnet-20241022 12355   1203            0 $0.06</span></span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="실무-활용-시나리오" class="level2" data-number="10.4">
<h2 data-number="10.4" class="anchored" data-anchor-id="실무-활용-시나리오"><span class="header-section-number">10.4</span> 실무 활용 시나리오</h2>
<p>ellmer의 진정한 가치는 일상적인 데이터 과학 작업을 자동화하고 개선하는 데 있다. 전통적으로 수작업이나 복잡한 스크립트가 필요했던 작업들이 LLM과의 자연어 대화로 해결된다. 데이터 품질 검증부터 코드 리뷰, 연구 논문 분석까지 다양한 시나리오에서 ellmer는 단순한 도구를 넘어 지능적인 어시스턴트 역할을 수행한다.</p>
<p>특히 Tool Calling과 구조화된 데이터 추출 기능의 조합은 기존에 불가능했던 워크플로우를 가능하게 한다. LLM이 실시간으로 데이터를 조회하고 분석한 후, 그 결과를 즉시 R 데이터프레임으로 변환하여 후속 분석에 활용할 수 있다. 이는 탐색적 데이터 분석(EDA)에서 생산성 향상뿐만 아니라 품질 관리, 자동화된 보고서 생성 등 다양한 영역에서 혁신을 가져온다.</p>
<section id="자동화된-데이터-품질-검증" class="level3" data-number="10.4.1">
<h3 data-number="10.4.1" class="anchored" data-anchor-id="자동화된-데이터-품질-검증"><span class="header-section-number">10.4.1</span> 자동화된 데이터 품질 검증</h3>
<p>데이터 품질 검증은 분석 프로젝트의 성공을 좌우하는 중요한 과정이지만, 반복적이고 시간 소모적인 작업이다. ellmer를 활용하면 LLM이 데이터를 직접 조사하고 문제점을 식별할 뿐만 아니라, 구체적인 해결 방안까지 제시한다. 결측값, 중복값, 이상치 등의 통계적 문제뿐만 아니라 데이터 타입 불일치나 논리적 모순까지 포착하여 전문가 수준의 품질 검증을 자동화할 수 있다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 데이터 품질 검증 도구 구축</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>chat <span class="ot">&lt;-</span> <span class="fu">chat_anthropic</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">system_prompt =</span> <span class="st">"You are a data quality expert. Identify issues and suggest fixes."</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 검증 함수를 도구로 등록</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>chat<span class="sc">$</span><span class="fu">register_tool</span>(<span class="fu">tool</span>(</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(df_name) {</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> <span class="fu">get</span>(df_name)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">missing =</span> <span class="fu">colSums</span>(<span class="fu">is.na</span>(df)),</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">duplicates =</span> <span class="fu">sum</span>(<span class="fu">duplicated</span>(df)),</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">outliers =</span> <span class="fu">lapply</span>(df[<span class="fu">sapply</span>(df, is.numeric)], </span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>                       <span class="cf">function</span>(x) <span class="fu">boxplot.stats</span>(x)<span class="sc">$</span>out)</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Performs comprehensive data quality checks"</span>,</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">df_name =</span> <span class="fu">type_string</span>(),</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">.name =</span> <span class="st">"check_quality"</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="co"># LLM이 자동으로 문제점 파악하고 해결책 제시</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>chat<span class="sc">$</span><span class="fu">chat</span>(<span class="st">"sales_data 데이터셋의 품질을 검사하고 개선 방안을 제시해줘"</span>)</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="코드-리뷰-자동화" class="level3" data-number="10.4.2">
<h3 data-number="10.4.2" class="anchored" data-anchor-id="코드-리뷰-자동화"><span class="header-section-number">10.4.2</span> 코드 리뷰 자동화</h3>
<p>코드 리뷰는 소프트웨어 품질 향상의 핵심이지만, 인적 자원의 제약으로 충분히 이뤄지지 않는 경우가 많다. ellmer는 이 문제를 해결한다. Claude의 뛰어난 R 코드 이해 능력을 활용하여 성능, 가독성, tidyverse 모범 사례 준수 여부를 자동으로 검토한다. 단순한 문법 오류 지적을 넘어 코드 구조 개선, 효율성 향상, 유지보수성 강화 방안까지 제안하여 개발자의 학습과 코드 품질 향상을 동시에 지원한다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 코드 리뷰 어시스턴트 구축</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>code_reviewer <span class="ot">&lt;-</span> <span class="fu">chat_anthropic</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">system_prompt =</span> <span class="st">"You are an expert R code reviewer. </span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="st">  Focus on: performance, readability, tidyverse best practices."</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 실제 코드 리뷰 수행</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>my_code <span class="ot">&lt;-</span> <span class="st">'</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="st">data %&gt;%</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="st">  filter(x &gt; 10) %&gt;%</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="st">  group_by(category) %&gt;%</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="st">  summarise(mean = mean(value)) %&gt;%</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="st">  arrange(desc(mean))</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="st">'</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>review <span class="ot">&lt;-</span> code_reviewer<span class="sc">$</span><span class="fu">chat</span>(<span class="fu">paste</span>(</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Review this R code and suggest improvements:</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  my_code</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>))</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="논문-메타데이터-추출" class="level3" data-number="10.4.3">
<h3 data-number="10.4.3" class="anchored" data-anchor-id="논문-메타데이터-추출"><span class="header-section-number">10.4.3</span> 논문 메타데이터 추출</h3>
<p>문헌 조사와 메타 분석에서 수십, 수백 편의 논문에서 일관된 형태로 정보를 추출하는 것은 극도로 노동집약적인 작업이다. ellmer의 구조화된 데이터 추출 기능은 이 과정을 혁신한다. PDF 논문에서 제목, 저자, 방법론, 주요 발견 등을 자동으로 추출하여 R 데이터프레임으로 변환한다. 이를 통해 연구자는 수작업 데이터 입력에서 해방되어 실제 분석과 인사이트 도출에 집중할 수 있으며, 체계적 문헌 리뷰나 메타 분석의 효율성이 대폭 향상된다.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># PDF 논문에서 구조화된 정보 추출</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>type_paper <span class="ot">&lt;-</span> <span class="fu">type_object</span>(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="fu">type_string</span>(),</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">authors =</span> <span class="fu">type_array</span>(<span class="fu">type_string</span>()),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">methodology =</span> <span class="fu">type_string</span>(),</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">key_findings =</span> <span class="fu">type_array</span>(<span class="fu">type_string</span>()),</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">limitations =</span> <span class="fu">type_array</span>(<span class="fu">type_string</span>())</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 여러 논문을 병렬로 처리</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>papers <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">"research_papers/"</span>, <span class="at">pattern =</span> <span class="st">"*.pdf"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>metadata <span class="ot">&lt;-</span> <span class="fu">parallel_chat_structured</span>(</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  chat,</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(papers, <span class="cf">function</span>(f) <span class="fu">content_pdf_file</span>(f)),</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  type_paper</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 연구 동향 분석을 위한 데이터프레임 생성</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>research_db <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(metadata, <span class="at">.id =</span> <span class="st">"paper_id"</span>)</span></code></pre></div><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="posit-생태계-통합" class="level2" data-number="10.5">
<h2 data-number="10.5" class="anchored" data-anchor-id="posit-생태계-통합"><span class="header-section-number">10.5</span> Posit 생태계 통합</h2>
<p>ellmer는 Posit의 포괄적 AI 전략의 핵심 구성 요소로, 단독으로 사용되기보다는 연관 패키지들과의 시너지를 통해 진정한 가치를 발휘한다. Posit은 데이터 과학 워크플로우의 각 단계에서 AI를 활용할 수 있도록 체계적인 패키지 생태계를 구축했다. ellmer가 LLM과의 기본적인 상호작용을 담당한다면, shinychat는 사용자 인터페이스를, vitals는 품질 관리를, ragnar는 고급 검색 기능을 제공한다.</p>
<p>이러한 모듈식 접근법은 개발자와 데이터 과학자가 필요에 따라 기능을 조합하여 맞춤형 AI 솔루션을 구축할 수 있게 한다. 예를 들어, ellmer로 기본 LLM 기능을 구현하고, shinychat로 웹 인터페이스를 추가하며, ragnar로 기업 내부 문서 검색 기능을 통합하는 것이 가능하다. 이는 복잡한 AI 시스템을 단계적으로 구축할 수 있는 유연성을 제공하면서도, 각 패키지가 특정 영역에서 최적화된 성능을 발휘할 수 있게 한다.</p>
<div class="cell" data-fig-width="6" data-layout-align="default">
<div class="cell-output-display">
<div id="fig-posit-ecosystem" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-posit-ecosystem-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-posit-ecosystem">graph LR
    subgraph PA["🔧 Posit AI 패키지"]
        direction LR
        R["🔍 ragnar&lt;br/&gt;RAG 검색&lt;br/&gt;&lt;i&gt;문서 임베딩&lt;/i&gt;"]
        M["⚙️ mcptools&lt;br/&gt;프로토콜&lt;br/&gt;&lt;i&gt;표준화&lt;/i&gt;"]
    end
    
    subgraph Core["💡 핵심 엔진"]
        E["💬 ellmer&lt;br/&gt;LLM 통합\index{LLM 통합}&lt;br/&gt;&lt;i&gt;OpenAI, Anthropic&lt;/i&gt;"]
    end
    
    subgraph UI["🖥️ 사용자 인터페이스"]
        S["💻 shinychat&lt;br/&gt;웹 UI&lt;br/&gt;&lt;i&gt;대화형 앱&lt;/i&gt;"]
        V["📊 vitals&lt;br/&gt;성능 평가&lt;br/&gt;&lt;i&gt;품질 모니터링&lt;/i&gt;"]
    end
    
    subgraph WF["📋 데이터 과학 워크플로우"]
        direction TB
        DA["📈 데이터 분석&lt;br/&gt;&lt;i&gt;탐색적 분석&lt;/i&gt;"]
        WA["🌐 웹 애플리케이션&lt;br/&gt;&lt;i&gt;Shiny 대시보드&lt;/i&gt;"]
        QC["✅ 품질 관리&lt;br/&gt;&lt;i&gt;성능 벤치마킹&lt;/i&gt;"]
        DS["🔎 문서 검색&lt;br/&gt;&lt;i&gt;지식 베이스&lt;/i&gt;"]
    end
    
    R --&gt; E
    M --&gt; E
    E --&gt; S
    E --&gt; V
    E --&gt; DA
    S --&gt; WA
    V --&gt; QC
    R --&gt; DS
    
    DA --&gt; WA
    WA --&gt; QC
    DS --&gt; DA
    QC -.-&gt; DS
    
    style E fill:#e1f5fe,stroke:#01579b,stroke-width:3px
    style S fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style V fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    style R fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style M fill:#ffebee,stroke:#b71c1c,stroke-width:2px
    style DA fill:#f0f8ff,stroke:#4682b4,stroke-width:2px
    style WA fill:#f5f5dc,stroke:#8b4513,stroke-width:2px
    style QC fill:#f0fff0,stroke:#228b22,stroke-width:2px
    style DS fill:#fff8dc,stroke:#daa520,stroke-width:2px
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-posit-ecosystem-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;10.2: Posit AI 생태계와 ellmer의 역할
</figcaption>
</figure>
</div>
</div>
</div>
<p>Posit의 이러한 생태계 접근법은 AI 기술의 복잡성을 관리 가능한 수준으로 분해하면서도, 전체적으로는 강력하고 확장 가능한 솔루션을 제공한다. 각 패키지는 독립적으로 사용될 수 있지만, 함께 사용될 때 1+1이 2보다 큰 시너지 효과를 창출한다. 이는 오픈소스 소프트웨어의 모듈성과 기업급 솔루션의 통합성을 동시에 제공하는 혁신적인 접근법이다.</p>
<ul>
<li><strong>shinychat + ellmer</strong>: LLM 기반 대화형 Shiny 앱 구축</li>
<li><strong>vitals + ellmer</strong>: LLM 응답 평가 및 벤치마킹<br>
</li>
<li><strong>ragnar + ellmer</strong>: RAG (Retrieval-Augmented Generation) 구현</li>
<li><strong>mcptools + ellmer</strong>: Model Context Protocol 지원</li>
</ul>
<p>ellmer는 단순한 LLM 인터페이스를 넘어 R 데이터 과학 워크플로우에 AI를 완전히 통합하는 패러다임 전환을 제시한다. Tool Calling으로 LLM이 R 환경과 직접 상호작용하고, 정형 데이터추출을 통해 비정형 데이터를 즉시 분석 가능한 형태로 변환하며, 병렬 처리로 대규모 작업을 효율화한다.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-ellmer2024docs" class="csl-entry" role="listitem">
Wickham, H. 기타. (2024). <em>ellmer: Large Language Model Interface</em>. <a href="https://ellmer.tidyverse.org/" class="uri">https://ellmer.tidyverse.org/</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "복사완료!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "복사완료!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./coding_ide.html" class="pagination-link" aria-label="포지트론 IDE">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">포지트론 IDE</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./coding_claude.html" class="pagination-link" aria-label="클로드 코드">
        <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">클로드 코드</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<div style="font-size: 0.85em;">
<p><i class="bi bi-book"></i> <a href="https://quarto.org/">Quarto</a>로 제작<br> <i class="bi bi-palette"></i> <a href="https://r2bit.com/">R2bit</a> 디자인</p>
</div>
</div>   
    <div class="nav-footer-center">
<div style="text-align: center;">
<p><img src="assets/favicon-32x32.png" alt="Logo" style="width: 24px; height: 24px; vertical-align: middle; margin-right: 8px;"> <strong>챗GPT AI</strong> | AI와 함께하는 데이터 과학 여행<br> <span style="font-size: 0.9em;">© 2025 <a href="mailto:admin@r2bit.com">한국 R 사용자회</a> | 이광춘 저</span></p>
</div>
</div>
    <div class="nav-footer-right">
<div style="font-size: 0.85em;">
<p><i class="bi bi-github"></i> <a href="https://github.com/bit2r/gpt-ai">소스 코드</a><br> <i class="bi bi-bug"></i> <a href="https://github.com/bit2r/gpt-ai/issues">이슈 리포트</a></p>
</div>
</div>
  </div>
</footer>




</body></html>